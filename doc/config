motors:on

config:motor 0 256 8
config:motor 1 256 8
config:motor 2 256 8
config:motor 3 256 16
config:motor 4 256 8
config:motor 5 256 8
config:motor 6 256 8

config:endstop:init_duration 400
config:homing:threshold 3000 3050 3050 3200 3300 30000
# 10 RPM
config:homing:scan 50 0 73300775 0 0
config:homing:clear 30000 0 73300775 0 0
config:homing:fine 1 0 73300775 0 0
# 180 RPM
# config:interactive:big_step 3839 0 0 52776 0 23039 0 1319413953 0 0 3840 0 1319413953 4294914520 0
config:interactive:big_step 3839 0 0 52776 0 8000 0 1319413953 0 0 3840 0 1319413953 4294914520 0
tick:on

homing:up
[ wait for completion ]

config:kinematics:slider:zero 0 -300 -27 -165.6
config:kinematics:slider:zero 1 -200 -27 -75.7
config:kinematics:slider:zero 2 -100 -27 -119.5
config:kinematics:slider:zero 3 0 -27 -150.3
config:kinematics:slider:zero 4 100 -27 -119.5
config:kinematics:slider:zero 5 200 -27 -75.7
config:kinematics:slider:zero 6 300 -27 -165.6

config:kinematics:slider:up 0 0 0 0.0000341796875
config:kinematics:slider:up 1 0 0 0.0000341796875
config:kinematics:slider:up 2 0 0 0.0000341796875
config:kinematics:slider:up 3 0 0 0.0000341796875
config:kinematics:slider:up 4 0 0 0.0000341796875
config:kinematics:slider:up 5 0 0 0.0000341796875
config:kinematics:slider:up 6 0 0 0.0000341796875

config:kinematics:limit:upper 0 6000000
config:kinematics:limit:upper 1 6000000
config:kinematics:limit:upper 2 6000000
config:kinematics:limit:upper 3 6000000
config:kinematics:limit:upper 4 6000000
config:kinematics:limit:upper 5 6000000
config:kinematics:limit:upper 6 6000000

config:kinematics:limit:lower 0 -18000000
config:kinematics:limit:lower 1 -18000000
config:kinematics:limit:lower 2 -18000000
config:kinematics:limit:lower 3 -18000000
config:kinematics:limit:lower 4 -18000000
config:kinematics:limit:lower 5 -18000000
config:kinematics:limit:lower 6 -18000000

# config:kinematics:limit:force 0 30
# config:kinematics:limit:force 1 30
# config:kinematics:limit:force 2 30
# config:kinematics:limit:force 3 30
# config:kinematics:limit:force 4 30
# config:kinematics:limit:force 5 30
# config:kinematics:limit:force 6 30

config:kinematics:attachment 0 -200 -35 -40
config:kinematics:attachment 1 -175 -35 40
config:kinematics:attachment 2 -95 -85.61 -45
config:kinematics:attachment 3 0 -33.0 -35
config:kinematics:attachment 4 95 -85.61 -45
config:kinematics:attachment 5 175 -35 40
config:kinematics:attachment 6 200 -35 -40

config:kinematics:strut 0 482.52
config:kinematics:strut 1 482.52
config:kinematics:strut 2 516
config:kinematics:strut 3 482.52
config:kinematics:strut 4 516
config:kinematics:strut 5 482.52
config:kinematics:strut 6 482.52

config:kinematics:interval 0.05
# config:kinematics:limit:steps_per_second 51200
config:kinematics:limit:steps_per_second 20000

kinematics:zero 0 75 -590 1 0 0 0

# manual experiments

config:motor 0 256 16
config:motor 1 256 16
config:motor 2 256 16
config:motor 3 256 16
config:motor 4 256 16
config:motor 5 256 16
config:motor 6 256 16

kinematics:again

tool:speed:movement 1
tool:speed:rotation 0.3
tool:attached 0 30 -45 1 0 0 0

# extend forward, 5cm
tool:move 0 155.1 -635 1 0 0 0

# extend forward, another 5cm
tool:move 0 205.1 -635 1 0 0 0

# extend forward, another 5cm
tool:move 0 305.1 -635 1 0 0 0

# extend forward, another 5cm
tool:move 0 355.1 -635 1 0 0 0

# adjust for joint elasticity on middle rod
config:kinematics:strut 3 478.52
kinematics:again

tool:move 0 355.1 -635 1 0 0 0
tool:move 0 405.1 -635 1 0 0 0
tool:move 0 405.1 -735 1 0 0 0
tool:move 0 405.1 -745 1 0 0 0
tool:move 0 405.1 -753 1 0 0 0
tool:move 0 405.1 -755 1 0 0 0
tool:move 0 405.1 -754.7 1 0 0 0
tool:move 0 425.1 -754.7 1 0 0 0
tool:move 0 425.1 -754.75 1 0 0 0
tool:move -20 425.1 -754.75 1 0 0 0
tool:move -20 425.1 -754 1 0 0 0
tool:move -20 425.1 -753.5 1 0 0 0
tool:move -40 425.1 -752.5 1 0 0 0
tool:move -60 425.1 -751.5 1 0 0 0
tool:move -80 425.1 -750.5 1 0 0 0
tool:move -80 418.1 -750.5 1 0 0 0
tool:move -80 418.1 -749.5 1 0 0 0
tool:move -80 400.1 -749.5 1 0 0 0
tool:move -80 400.1 -749 1 0 0 0
tool:move 0 400.1 -749 1 0 0 0
tool:move 0 405.1 -754.7 1 0 0 0

tool:move 0 105.1 -635 1 0 0 0

# platform tilt: 45 degrees
tool:move 0 105.0 -635 0.9238795325112867 -0.3826834323650898 0 0
# and back, THIS DOES NOT WORK?!?
tool:move 0 105.0 -635 1 0 0 0

config:kinematics:strut:backslash 0 -0.3
config:kinematics:strut:backslash 1 0
config:kinematics:strut:backslash 2 -0.3
config:kinematics:strut:backslash 3 0
config:kinematics:strut:backslash 4 -0.3
config:kinematics:strut:backslash 5 0
config:kinematics:strut:backslash 6 -0.3

config:kinematics:strut:elasticity 0 -0.002
config:kinematics:strut:elasticity 1 0
config:kinematics:strut:elasticity 2 -0.0005
config:kinematics:strut:elasticity 3 0
config:kinematics:strut:elasticity 4 -0.0005
config:kinematics:strut:elasticity 5 0
config:kinematics:strut:elasticity 6 -0.002

config:kinematics:strut 1 547
config:kinematics:strut 2 545
config:kinematics:strut 4 545
config:kinematics:strut 5 547
tool:move 0 205.0 -635 1 0 0 0

# platform tilt: 45 degrees
tool:move 0 95.0 -635 0.9238795325112867 -0.3826834323650898 0 0
tool:move 0 95.0 -635 1 0 0 0

tool:attached 0 30 -45 0.9961946980917455 0.08715574274765817 0 0
tool:move 0 95.0 -635 1 0 0 0

tool:attached 0 30 -45 0.9238795325112867 0.3826834323650898 0 0
tool:move 0 95.0 -635 1 0 0 0

# manually pull forward
tool:move 0 500.0 -635 1 0 0 0
tool:move 50 500.0 -635 1 0 0 0
tool:move 150 500.0 -635 1 0 0 0

# platform rotate: 10 degrees, left side forward
tool:attached -260 30 -45 0.9238795325112867 0.3826834323650898 0 0
tool:move -260 95.0 -635 1 0 0 0
tool:move -260 185.0 -635 0.9961946980917455 0 -0.08715574274765817 0


# 60 degrees
tool:move 0 95.0 -635 0.8660254037844387 -0.49999999999999994 0 0
# 20 degrees
tool:move 0 95.0 -635 0.984807753012208 -0.17364817766693033 0 0
# 90 degrees
tool:move 0 95.0 -635 0.7071067811865475 -0.7071067811865475 0 0
